/*! jquery.jelect.js v1.0.0 | felixexter | MIT License | https://github.com/CSSSR/jelect/ */
!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"==typeof exports?require("jquery"):jQuery)}(function(t){"use strict";var e,n,i="jelect";t[i]={version:"1.0.0",options:{classes:{containerActive:i+"_state_active",currentActive:i+"-current_state_active",optionsActive:i+"-options_state_active",optionActive:i+"-option_state_active"},plugins:[]},plugins:{},selectors:{container:".js-"+i,input:".js-"+i+"-input",current:".js-"+i+"-current",options:".js-"+i+"-options",option:".js-"+i+"-option"},keyCode:{ENTER:13,ESC:27}},n=function(e){var n=this,o=t[i].selectors,s=t[i].options.classes,c=n.$jelectOptions.find(o.option+'[data-val="'+e+'"]'),r=c.text();c.addClass(s.optionActive).siblings(o.option).removeClass(s.optionActive),n.$jelect.val(e).removeClass(s.containerActive).trigger("jelect.change"),n.$jelectCurrent.text(r).attr("data-val",e),n.$jelectInput.val(e).trigger("change"),n.trigger("change")},e=function(e,n){var o=t[i],s=o.selectors,c={$jelect:e,$jelectCurrent:e.find(s.current),$jelectOptions:e.find(s.options),$jelectInput:e.find(s.input),options:t.extend(!0,{},o.options,n||{})};t.extend(!0,this,c),this.init()},e.prototype.init=function(){var e=this,o=t[i],s=o.selectors,c=e.options.classes,r=e.val();e.trigger("init"),e.$jelect.val(r),e.$jelectCurrent.on("click "+i+".clickCurrent",function(){var n=t(s.container).filter("."+c.containerActive).not(e.$jelect),i=t(s.options).filter("."+c.optionsActive).not(e.$jelectOptions),o=!e.$jelect.hasClass(c.containerActive)&&!e.$jelectOptions.hasClass(c.optionsActive);o&&e.trigger("beforeOpen"),n.length&&i.length&&(n.removeClass(c.containerActive),i.removeClass(c.optionsActive)),e.$jelect.toggleClass(c.containerActive),e.$jelectOptions.toggleClass(c.optionsActive),o&&(e.$jelectCurrent.trigger("focus"),e.trigger("afterOpen"))}),e.$jelectOptions.on("click "+i+".changeOption",s.option,function(){var i=t(this).data("val");n.call(e,i),e.$jelectOptions.removeClass(c.optionsActive)})},e.prototype.trigger=function(e){var n=this;t.each(n.options.plugins||[],function(o,s){s=t[i].plugins[s],s&&s[e]&&s[e]({$jelect:n.$jelect,$jelectCurrent:n.$jelectCurrent,$jelectOptions:n.$jelectOptions,$jelectInput:n.$jelectInput,options:n.options,text:n.text(),val:n.val()})})},e.prototype.text=function(){return this.$jelectCurrent.text().trim()},e.prototype.val=function(){return this.$jelect.val()},e.prototype.setValue=function(t){return"undefined"!=typeof t&&n.call(this,t),this},t(window.document).on("click "+i+".clickOutside",function(e){var n,o,s=t[i],c=s.selectors,r=t(e.target),a=t(c.options);if(!r.is(c.container)&&!r.closest(c.container).length){if(n=a.closest(c.container).data("jelect"),!n)return;o=n.options.classes,a.hasClass(o.optionsActive)&&(a.removeClass(o.optionsActive).closest(c.container).removeClass(o.containerActive),n.trigger("clickOutside"))}}).on("keydown "+i+".keydown",function(e){var n,o,s,c=t(e.target),r=t[i],a=r.keyCode,l=e.keyCode,p=r.selectors;if(c.is(p.current))switch(n=c.closest(p.container).data(i),o=n.options.classes,s=c.siblings(p.options).filter(":visible"),l){case a.ENTER:c.trigger(i+".clickCurrent"),e.preventDefault();break;case a.ESC:s.length&&c.trigger(i+".clickCurrent"),c.trigger("blur")}else c.is(p.option)&&(n=c.closest(p.container).data(i),o=n.options.classes,l===a.ENTER&&c.trigger(i+".changeOption"))}),t.fn[i]=function(n){var o=this,s=arguments;if(void 0===n||"object"==typeof n)return o.each(function(o,s){t.data(s,i)||t.data(s,i,new e(t(s),n))});if("string"==typeof n&&"_"!==n[0]&&"init"!==n){var c;return o.each(function(o,r){var a=t.data(r,i);a instanceof e&&"function"==typeof a[n]&&(c=a[n].apply(a,Array.prototype.slice.call(s,1))),"destroy"===n&&t.data(this,i,null)}),void 0!==c?c:o}}});