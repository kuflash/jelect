/*! jquery.jelect.js v1.0.0 | felixexter | MIT License | https://github.com/CSSSR/jelect/ */
!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"==typeof exports?require("jquery"):jQuery)}(function(t){"use strict";var e,i,n="jelect";t[n]={version:"1.0.0",options:{classes:{containerActive:n+"_state_active",currentActive:n+"-current_state_active",optionsActive:n+"-options_state_active",optionActive:n+"-option_state_active",optionDisabled:n+"-option_state_disabled"},plugins:[]},plugins:{},selectors:{container:".js-"+n,input:".js-"+n+"-input",current:".js-"+n+"-current",options:".js-"+n+"-options",option:".js-"+n+"-option"},keyCode:{ENTER:13,ESC:27}},i=function(e){var i=this,o=t[n].selectors,s=t[n].options.classes,r=i.$jelectOptions.find(o.option+'[data-val="'+e+'"]'),c=r.text();return r.hasClass(s.optionDisabled)?(console.error("Option {"+e+"} is disabled"),!1):(r.addClass(s.optionActive).siblings(o.option).removeClass(s.optionActive),i.$jelect.val(e).removeClass(s.containerActive).trigger("jelect.change"),i.$jelectCurrent.text(c).attr("data-val",e),i.$jelectInput.val(e).trigger("change"),void i.trigger("change"))},e=function(e,i){var o=t[n],s=o.selectors,r={$jelect:e,$jelectCurrent:e.find(s.current),$jelectOptions:e.find(s.options),$jelectInput:e.find(s.input),options:t.extend(!0,{},o.options,i||{})};t.extend(!0,this,r),this.init()},e.prototype.init=function(){var e=this,o=t[n],s=o.selectors,r=e.options.classes,c=e.val();e.trigger("init"),e.$jelect.val(c),e.$jelectCurrent.on("click "+n+".clickCurrent",function(){var i=t(s.container).filter("."+r.containerActive).not(e.$jelect),n=t(s.options).filter("."+r.optionsActive).not(e.$jelectOptions),o=!e.$jelect.hasClass(r.containerActive)&&!e.$jelectOptions.hasClass(r.optionsActive);o&&e.trigger("beforeOpen"),i.length&&n.length&&(i.removeClass(r.containerActive),n.removeClass(r.optionsActive)),e.$jelect.toggleClass(r.containerActive),e.$jelectOptions.toggleClass(r.optionsActive),o&&(e.$jelectCurrent.trigger("focus"),e.trigger("afterOpen"))}),e.$jelectOptions.on("click "+n+".changeOption",s.option,function(){var n=t(this),o=n.data("val");return n.hasClass(r.optionDisabled)?!1:(i.call(e,o),void e.$jelectOptions.removeClass(r.optionsActive))})},e.prototype.trigger=function(e){var i=this;t.each(i.options.plugins||[],function(o,s){s=t[n].plugins[s],s&&s[e]&&s[e]({$jelect:i.$jelect,$jelectCurrent:i.$jelectCurrent,$jelectOptions:i.$jelectOptions,$jelectInput:i.$jelectInput,options:i.options,text:i.text(),val:i.val()})})},e.prototype.text=function(){return this.$jelectCurrent.text().trim()},e.prototype.val=function(){return this.$jelect.val()},e.prototype.setValue=function(t){return"undefined"!=typeof t&&i.call(this,t),this},e.prototype.disable=function(e,i){var o,s=this,r=t[n],c=r.selectors,a=r.options.classes;if("undefined"!=typeof e&&"undefined"!=typeof i&&(o=s.$jelectOptions.find(c.option+'[data-val="'+e+'"]'),o.toggleClass(a.optionDisabled,i),s.$jelectCurrent.data("val")==e)){var l=s.$jelectOptions.find(c.option).not("."+a.optionDisabled).first();s.setValue(l.data("val"))}return this},t(window.document).on("click "+n+".clickOutside",function(e){var i,o,s=t[n],r=s.selectors,c=t(e.target),a=t(r.options);if(!c.is(r.container)&&!c.closest(r.container).length){if(i=a.closest(r.container).data("jelect"),!i)return;o=i.options.classes,a.hasClass(o.optionsActive)&&(a.removeClass(o.optionsActive).closest(r.container).removeClass(o.containerActive),i.trigger("clickOutside"))}}).on("keydown "+n+".keydown",function(e){var i,o,s,r=t(e.target),c=t[n],a=c.keyCode,l=e.keyCode,p=c.selectors;if(r.is(p.current))switch(i=r.closest(p.container).data(n),o=i.options.classes,s=r.siblings(p.options).filter(":visible"),l){case a.ENTER:r.trigger(n+".clickCurrent"),e.preventDefault();break;case a.ESC:s.length&&r.trigger(n+".clickCurrent"),r.trigger("blur")}else r.is(p.option)&&(i=r.closest(p.container).data(n),o=i.options.classes,l===a.ENTER&&r.trigger(n+".changeOption"))}),t.fn[n]=function(i){var o=this,s=arguments;if(void 0===i||"object"==typeof i)return o.each(function(o,s){t.data(s,n)||t.data(s,n,new e(t(s),i))});if("string"==typeof i&&"_"!==i[0]&&"init"!==i){var r;return o.each(function(o,c){var a=t.data(c,n);a instanceof e&&"function"==typeof a[i]&&(r=a[i].apply(a,Array.prototype.slice.call(s,1))),"destroy"===i&&t.data(this,n,null)}),void 0!==r?r:o}}});