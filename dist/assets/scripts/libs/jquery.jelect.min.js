/*! jquery.jelect.js v1.0.0 | felixexter | MIT License | https://github.com/CSSSR/jelect/ */
!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"==typeof exports?require("jquery"):jQuery)}(function(t){"use strict";var e,n="jelect";t[n]={version:"1.0.0",options:{classes:{containerActive:n+"_state_active",currentActive:n+"-current_state_active",optionsActive:n+"-options_state_active",optionActive:n+"-option_state_active"},plugins:[]},plugins:{},selectors:{container:".js-"+n,input:".js-"+n+"-input",current:".js-"+n+"-current",options:".js-"+n+"-options",option:".js-"+n+"-option"},keyCode:{ENTER:13,ESC:27}},e=function(e,i){var o=t[n],s=o.selectors,c={$jelect:e,$jelectCurrent:e.find(s.current),$jelectOptions:e.find(s.options),$jelectInput:e.find(s.input),options:t.extend(!0,{},o.options,i||{})};t.extend(!0,this,c),this.init()},e.prototype.init=function(){var e=this,i=t[n],o=i.selectors,s=e.options.classes,c=e.val();e.trigger("init"),e.$jelect.val(c),e.$jelectCurrent.on("click "+n+".clickCurrent",function(){var n=t(o.container).filter("."+s.containerActive).not(e.$jelect),i=t(o.options).filter("."+s.optionsActive).not(e.$jelectOptions),c=!e.$jelect.hasClass(s.containerActive)&&!e.$jelectOptions.hasClass(s.optionsActive);c&&e.trigger("beforeOpen"),n.length&&i.length&&(n.removeClass(s.containerActive),i.removeClass(s.optionsActive)),e.$jelect.toggleClass(s.containerActive),e.$jelectOptions.toggleClass(s.optionsActive),c&&(e.$jelectCurrent.trigger("focus"),e.trigger("afterOpen"))}),e.$jelectOptions.on("click "+n+".changeOption",o.option,function(){var n=t(this),i=n.data("val"),c=n.text();n.addClass(s.optionActive).siblings(o.option).removeClass(s.optionActive),e.$jelectOptions.removeClass(s.optionsActive),e.$jelect.val(i).removeClass(s.containerActive).trigger("jelect.change"),e.$jelectCurrent.text(c).attr("data-val",i).trigger("focus"),e.$jelectInput.val(i).trigger("change"),e.trigger("change")})},e.prototype.trigger=function(e){var i=this;t.each(i.options.plugins||[],function(o,s){s=t[n].plugins[s],s&&s[e]&&s[e]({$jelect:i.$jelect,$jelectCurrent:i.$jelectCurrent,$jelectOptions:i.$jelectOptions,$jelectInput:i.$jelectInput,options:i.options,text:i.text(),val:i.val()})})},e.prototype.text=function(){return this.$jelectCurrent.text().trim()},e.prototype.val=function(){return this.$jelect.val()},t(window.document).on("click "+n+".clickOutside",function(e){var i,o,s=t[n],c=s.selectors,r=t(e.target),a=t(c.options);if(!r.is(c.container)&&!r.closest(c.container).length){if(i=a.closest(c.container).data("jelect"),!i)return;o=i.options.classes,a.hasClass(o.optionsActive)&&(a.removeClass(o.optionsActive).closest(c.container).removeClass(o.containerActive),i.trigger("clickOutside"))}}).on("keydown "+n+".keydown",function(e){var i,o,s,c=t(e.target),r=t[n],a=r.keyCode,l=e.keyCode,p=r.selectors;if(c.is(p.current))switch(i=c.closest(p.container).data(n),o=i.options.classes,s=c.siblings(p.options).filter(":visible"),l){case a.ENTER:c.trigger(n+".clickCurrent"),e.preventDefault();break;case a.ESC:s.length&&c.trigger(n+".clickCurrent"),c.trigger("blur")}else c.is(p.option)&&(i=c.closest(p.container).data(n),o=i.options.classes,l===a.ENTER&&c.trigger(n+".changeOption"))}),t.fn[n]=function(i){var o=this,s=arguments;if(void 0===i||"object"==typeof i)return o.each(function(o,s){t.data(s,n)||t.data(s,n,new e(t(s),i))});if("string"==typeof i&&"_"!==i[0]&&"init"!==i){var c;return o.each(function(o,r){var a=t.data(r,n);a instanceof e&&"function"==typeof a[i]&&(c=a[i].apply(a,Array.prototype.slice.call(s,1))),"destroy"===i&&t.data(this,n,null)}),void 0!==c?c:o}}});